\chapter{Proposta de Classificação}
A classificação de recursos facilitará o desenvolvimento de novos \emph{drivers} para futuras aplicações, pois possibilitará a definição de interfaces pré-estabelecidas que representem classes de recursos. Outra vantagem decorrente é a possibilidade de seleção de recursos equivalentes, caso o provedor originalmente selecionado esteja indisponível.

Após pesquisas, estudos e comparações realizadas e apresentadas em seções anteriores, propõe-se uma classificação que seja relacionada, extensível, que permita a um recurso pertencer à multiplas classes simultaneamente e cuja representação seja via JSON (\emph{JavaScript Object Notation}).

\begin{comment}
Neste capítulo falaremos sobre a classificação de dispositivos proposta. Essa classificação deverá ser relacionada, extensível e um dispositivo deverá poder fazer parte de múltiplas classes. A classificação relacionada facilita a implementação de novos \emph{drivers} para o \emph{uOS} que poderão se aproveitar das interfaces já existentes. Ser extensível, pois permite uma relação de especialização entre diferentes classes. A capacidade de permitir que um dispositivo pertença à diferentes classes, garante uma flexibilidade para dispositivos com diversos recursos poderem se encaixar nas classificações padrões sem a necessidade da definição de uma nova classe.
\end{comment}

\begin{itemize}
	\item Forma de classificação

	Optou-se por uma classificação relacionada, em que classes de recursos podem se relacionar umas com as outras utilizando-se herança ou composição. A primeira possibilita a extensão, em que interfaces previamente estabelecidas seriam utilizadas na elaboração de novos \emph{drivers}. Obtêm-se, com isso, a possibilidade da utilização de polimorfismo e a vantagem de que cada classe represente exatamente um objeto tão simples quanto possível, almejando-se obter uma alta coesão e um baixo acoplamento. A segunda permite que uma classe contenha, em sua definição, zero ou mais classes. Dessa forma, torna-se possível a delegação de responsabilidades para serviços existentes em outras classes outrora estabelecidas, evitando tanto a repetição de código como um alto acoplamento.

	\item Representação

	Em um ambiente cujos dispositivos podem se movimentar livremente e seus recursos devem ser compartilhados de forma transparente ao usuário, torna-se necessário que cada dispositivo presente na rede possa se comunicar facilmente com os demais. Atualmente, o \emph{uOS} já utiliza JSON em suas trocas de mensagens e substituí-lo seria inviável.

	\begin{comment}
	Tal formato apresenta as seguintes características:
	
		\begin{itemize}
	 		\item Baixo custo computacional~\cite{comparativojson};
	 		\item É auto-descritivo, o que facilita os processos de leitura e escrita por seres-humanos~\cite{json};
	 		\item É estruturado, o que facilita sua criação e análise por computadores~\cite{json};
	 		\item É independente de plataforma, pois utiliza UTF-8 como codificação~\cite{utf8}.
	 	\end{itemize}
	 \end{comment}
\end{itemize}

A seguir, será apresentada a classificação de recursos proposta (seção ~\ref{sec:Aclassficacao}), o conceito de equivalência de recursos (seção ~\ref{sec:equivalenciaRecursos}) e, por fim, o impacto que esta classificação trará para o middleware \emph{uOS} (seção \ref{sec:impactoUOS}).


\section{A Classificação}
\label{sec:Aclassficacao}
Levando-se em consideração os fatores apresentados anteriormente e analisando-se a tabela~\ref{tab:comparativoClasses}, definiu-se as seguintes classes padrões:

\begin{itemize}
	\item Cliente de Áudio
		
		Abrange quaisquer tipos de dispositivos que contenham a capacidade de reproduzir áudio Exemplo: TVs, celulares, aparelhos de som;
	\item Servidor de Áudio
		
		Abrange quaisquer tipos de dispositivos que possam operar como servidor de áudio Exemplo: TVs, celulares, aparelhos de som;
	\item Cliente de Vídeo
		
		Abrange quaisquer tipos de dispositivos que possuam a capacidade de prover um recurso de renderização de vídeo. Exemplo: TVs, celulares, projetores;
	\item Servidor de Vídeo
		
		Abrange quaisquer tipos de dispositivos que possuam operar como servidor de vídeo. Exemplo: TVs, celulares;
	\item Display de Imagem
		
		Abrange quaisquer tipos de dispositivos que possam prover um recurso de renderização de imagem. Exemplo: TVs, celular, impressora;
	\item Servidor Imagem
		
		Abrange quaisquer tipos de dispositivos que possam operar como servidor de imagem. Exemplo: câmeras digitais, \emph{scanners};
	\item Teclado
		
		Abrange quaisquer tipos de dispositivos que possam prover um recurso de teclado. Exemplo: teclados, \emph{notebooks}, celulares, \emph{tablets};
	\item Apontador
		
		Abrange quaisquer tipos de dispositivos que possuam o recurso de apontadores. Exemplo: \emph{mouses}, telas sensíveis ao toque, \emph{joysticks};
\end{itemize}

Tal definição é importante pois é ela que permitirá um agrupamento de recursos em torno de suas funcionalidades, a saber, os seus serviços. Seu valor ficará mais claro com a leitura das próximas seções, nas quais os conceitos de ``Equivalência de recursos'' e ``Árvore de Equivalência'' serão apresentados.


***************************************************************************************************



Cada uma dessas classes servirá de raiz para uma árvore de recursos, ou seja, existirão diversas árvores, cada qual com outras classes agrupadas por funcionalidades. Para tornar tal estrutura mais clara, considere a figura~\ref{fig:arvoreDeRecursos}. Observe a hierarquia formada a partir da classe padrão \emph{Pointer}. Ela é responsável por agrupar todas as classes de recursos capazes de prover serviços relacionados aos apontadores existentes, por exemplo, \emph{click} e \emph{scroll}. O mesmo acontece com as demais classes padrões. A estrutura em árvore é importante pois permite uma melhor organização lógica das classes relacionadas, além de permitir uma fácil navegabilidade entre elas.

\begin{figure}[ht]
	\center
	\includegraphics[scale=0.35]{imagens/hierarquiaDeRecursos}
	\caption{Exemplo da estrutura de árvores de recursos.}
	\label{fig:arvoreDeRecursos}
\end{figure}

Uma vez que tal estrutura esteja construída, torna-se simples descobrir todos os recursos equivalentes a quaisquer classes presentes na árvore. Para tal, basta tomar a subárvore cuja raiz é o elemento ao qual deseja-se obter seus equivalentes. Observe a figura~\ref{fig:tutorialDeEquivalencia} e imagine que seja necessário oferecer todos os recursos equivalentes à classe \emph{Clickable}. Ao se colocar tal classe como raiz de sua subárvore, torna-se fácil perceber que as classes \emph{Joystick}, \emph{Trackball}, \emph{Mouse} e \emph{TouchScreen} são suas equivalentes.

\begin{figure}[ht]
	\center
	\includegraphics[scale=0.55]{imagens/tutorialDeEquivalencia}
	\caption{Exemplo de como se encontrar recursos equivalentes.}
	\label{fig:tutorialDeEquivalencia}
\end{figure}

De volta à situação exemplificada na seção~\ref{cap:classificacaoDeRecursos}, suponha agora uma representação de recursos modelada conforme a figura~\ref{fig:recursos}. 

Diferentemente do exemplo anterior, nesta nova representação cada recurso pode interagir com os demais aproveitando-se da hierarquia proposta. Esta traz as vantagens da herança, que se aproveita da valência de tipos, ou seja, uma CameraRecord é uma Camera, que por sua vez, é um recurso de imagem. Dessa maneira, apesar de D1 estar indiponível no momento da solicitação, D2 e D3 poderiam, facilmente, ser repassados à aplicação solicitante, pois seriam considerados equivalentes.

\begin{figure}[ht]
	\center
	\includegraphics[scale=0.8]{imagens/diagramaRecursosProposta}
	\caption{Exemplos de caso particular da proposta de classificação de recursos.}
	\label{fig:diagramaRecursosProposta}
\end{figure}

\begin{comment}
Suponha que um usuário, por meio de uma aplicação de seu celular, deseja utilizar os serviços providos de um recurso de imagem. Considere ainda, que existam três instâncias disponíveis deste recurso no \emph{smart space}. Para garantir a equivalência dos recursos devemos garantir que eles possuam os mesmos serviços, e para isso, devemos garantir que os serviços possuam a mesma interface, ou seja, os mesmos tipos e número de parâmetros. Suponha que para o usuário que deseja o recurso simples de imagem seja indiferente a quantidade de \emph{megapixels} da imagem. Para o usuário basta apenas o provimento do serviço que retorne algum dado ou altere o estado de alguma aplicação. Dessa forma, devemos garantir que qualquer uma das três instâncias possam prover esse serviço. Uma câmera com \emph{flash}, por exemplo, para este cenário, seria equivalente a um recurso de câmera sem \emph{flash}.
\end{comment}

\input{capitulos/3.Proposta/equivalencia}
\input{capitulos/3.Proposta/impacto}

